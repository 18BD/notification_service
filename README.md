# Сервис уведомлений

## Описание

Этот проект Dockerized, что облегчает его установку и развертывание.<br>
Он состоит из нескольких сервисов, включая основное приложение, воркер, а также сервис Redis для обработки фоновых задач.

## Реализация

В сервисе спроектированы и реализованы API для:
- добавления нового клиента в справочник со всеми его атрибутами
- обновления данных атрибутов клиента
- удаления клиента из справочника
- добавления новой рассылки со всеми её атрибутами
- получения общей статистики по созданным рассылкам и количеству отправленных сообщений по ним с группировкой по статусам
- получения детальной статистики отправленных сообщений по конкретной рассылке
- обновления атрибутов рассылки
- удаления рассылки
- обработки активных рассылок и отправки сообщений клиентам

## Дополнительно

- (3) Подготовлен docker-compose для запуска всех сервисов проекта одной командой.
- (5) По адресу /docs/ открывается страница со Swagger UI и в нём отображается описание разработанного API.
- (6) Реализован администраторский Web UI для управления рассылками и получения статистики по отправленным сообщениям.
- (12) Обеспечено подробное логирование на всех этапах обработки запросов, чтобы при эксплуатации была возможность найти в логах всю информацию по:
  - id рассылки - все логи по конкретной рассылке (и запросы на api и внешние запросы на отправку конкретных сообщений)
  - id сообщения - по конкретному сообщению (все запросы и ответы от внешнего сервиса, вся обработка конкретного сообщения)
  - id клиента - любые операции, которые связаны с конкретным клиентом (добавление/редактирование/отправка сообщения/…)

## Предварительные требования

Убедитесь, что у вас установлен Docker на вашем компьютере.<br>
Если нет, вы можете загрузить его [здесь](https://www.docker.com/get-started).

## Начало работы

Следуйте этим шагам, чтобы запустить проект локально.

### 1. Клонирование репозитория

```bash
git clone https://github.com/your-nickname/notification_service.git
cd notification_service
```

### 2. Сборка Docker-образов

```bash
docker-compose build
```

### 3. Запуск Docker-контейнеров

```bash
docker-compose up
```

Это запустит сервисы, определенные в вашем файле docker-compose.yml, включая приложение, воркер и Redis.

### 4. Доступ к приложению

- Приложение должно быть доступно по адресу: [http://localhost:8000](http://localhost:8000).
- Администраторский Web UI: [http://localhost:8000/admin](http://localhost:8000/admin). login: admin, pass: admin

## Информация о файлах

- Файл docker-compose.yml определяет сервисы и их конфигурации.

- Файлы ./docker/app/Dockerfile и ./docker/worker/Dockerfile указывают, как строятся образы приложения и воркера.

- Директория ./src/ содержит исходный код вашего проекта.

- Redis используется в качестве зависимости как для приложения, так и для воркера. Убедитесь, что он доступен, прежде чем запускать другие сервисы.

## Настройка

Замените 'ваше значение токена' на нужное значение для переменной SERVICE_JWT_TOKEN, и укажите ваш часовой пояс в переменной TIME_ZONE (в данном случае, Asia/Almaty).
